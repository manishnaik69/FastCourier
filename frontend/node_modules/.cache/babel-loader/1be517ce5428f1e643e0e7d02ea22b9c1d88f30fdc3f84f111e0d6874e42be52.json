{"ast":null,"code":"var _s = $RefreshSig$();\n// src/hooks/usePricing.js\nimport { useState, useCallback } from 'react';\nimport { useAuth } from './useAuth';\nimport toast from 'react-hot-toast';\nexport const usePricing = () => {\n  _s();\n  const [pricingRules, setPricingRules] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const getAuthHeader = () => {\n    const token = localStorage.getItem('token');\n    if (!token) throw new Error('Authentication required');\n    return token.startsWith('Bearer ') ? token : `Bearer ${token}`;\n  };\n  const fetchPricingRules = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const response = await fetch('http://localhost:5000/api/admin/pricing', {\n        headers: {\n          'Authorization': getAuthHeader(),\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        const data = await response.json();\n        throw new Error(data.message || 'Failed to fetch pricing rules');\n      }\n      const data = await response.json();\n      setPricingRules(data);\n    } catch (err) {\n      console.error('Error fetching pricing rules:', err);\n      setError(err.message);\n      toast.error(err.message);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n  const addPricingRule = async ruleData => {\n    try {\n      setLoading(true);\n      setError(null);\n      const response = await fetch('http://localhost:5000/api/admin/pricing', {\n        method: 'POST',\n        headers: {\n          'Authorization': getAuthHeader(),\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(ruleData)\n      });\n      if (!response.ok) {\n        const data = await response.json();\n        throw new Error(data.message || 'Failed to add pricing rule');\n      }\n      toast.success('Pricing rule added successfully');\n      await fetchPricingRules();\n      return true;\n    } catch (err) {\n      console.error('Error adding pricing rule:', err);\n      setError(err.message);\n      toast.error(err.message);\n      return false;\n    } finally {\n      setLoading(false);\n    }\n  };\n  const updatePricingRule = async (id, ruleData) => {\n    try {\n      setLoading(true);\n      setError(null);\n      const response = await fetch(`http://localhost:5000/api/admin/pricing/${id}`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': getAuthHeader(),\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(ruleData)\n      });\n      if (!response.ok) {\n        const data = await response.json();\n        throw new Error(data.message || 'Failed to update pricing rule');\n      }\n      toast.success('Pricing rule updated successfully');\n      await fetchPricingRules();\n      return true;\n    } catch (err) {\n      console.error('Error updating pricing rule:', err);\n      setError(err.message);\n      toast.error(err.message);\n      return false;\n    } finally {\n      setLoading(false);\n    }\n  };\n  const deletePricingRule = async id => {\n    try {\n      setLoading(true);\n      setError(null);\n      const response = await fetch(`http://localhost:5000/api/admin/pricing/${id}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': getAuthHeader()\n        }\n      });\n      if (!response.ok) {\n        const data = await response.json();\n        throw new Error(data.message || 'Failed to delete pricing rule');\n      }\n      toast.success('Pricing rule deleted successfully');\n      await fetchPricingRules();\n      return true;\n    } catch (err) {\n      console.error('Error deleting pricing rule:', err);\n      setError(err.message);\n      toast.error(err.message);\n      return false;\n    } finally {\n      setLoading(false);\n    }\n  };\n  return {\n    pricingRules,\n    loading,\n    error,\n    fetchPricingRules,\n    addPricingRule,\n    updatePricingRule,\n    deletePricingRule\n  };\n};\n_s(usePricing, \"LxdIviAPEYVpTTZJSHJ+mCMNWZE=\");\nexport default usePricing;","map":{"version":3,"names":["useState","useCallback","useAuth","toast","usePricing","_s","pricingRules","setPricingRules","loading","setLoading","error","setError","getAuthHeader","token","localStorage","getItem","Error","startsWith","fetchPricingRules","response","fetch","headers","ok","data","json","message","err","console","addPricingRule","ruleData","method","body","JSON","stringify","success","updatePricingRule","id","deletePricingRule"],"sources":["C:/Users/Asus/Desktop/cms/manish/manish1/frontend/src/hooks/usePricing.js"],"sourcesContent":["// src/hooks/usePricing.js\r\nimport { useState, useCallback } from 'react';\r\nimport { useAuth } from './useAuth';\r\nimport toast from 'react-hot-toast';\r\n\r\nexport const usePricing = () => {\r\n  const [pricingRules, setPricingRules] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  const getAuthHeader = () => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) throw new Error('Authentication required');\r\n    return token.startsWith('Bearer ') ? token : `Bearer ${token}`;\r\n  };\r\n\r\n  const fetchPricingRules = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      const response = await fetch('http://localhost:5000/api/admin/pricing', {\r\n        headers: {\r\n          'Authorization': getAuthHeader(),\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const data = await response.json();\r\n        throw new Error(data.message || 'Failed to fetch pricing rules');\r\n      }\r\n\r\n      const data = await response.json();\r\n      setPricingRules(data);\r\n    } catch (err) {\r\n      console.error('Error fetching pricing rules:', err);\r\n      setError(err.message);\r\n      toast.error(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const addPricingRule = async (ruleData) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      const response = await fetch('http://localhost:5000/api/admin/pricing', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': getAuthHeader(),\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(ruleData)\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const data = await response.json();\r\n        throw new Error(data.message || 'Failed to add pricing rule');\r\n      }\r\n\r\n      toast.success('Pricing rule added successfully');\r\n      await fetchPricingRules();\r\n      return true;\r\n    } catch (err) {\r\n      console.error('Error adding pricing rule:', err);\r\n      setError(err.message);\r\n      toast.error(err.message);\r\n      return false;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updatePricingRule = async (id, ruleData) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      const response = await fetch(`http://localhost:5000/api/admin/pricing/${id}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Authorization': getAuthHeader(),\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(ruleData)\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const data = await response.json();\r\n        throw new Error(data.message || 'Failed to update pricing rule');\r\n      }\r\n\r\n      toast.success('Pricing rule updated successfully');\r\n      await fetchPricingRules();\r\n      return true;\r\n    } catch (err) {\r\n      console.error('Error updating pricing rule:', err);\r\n      setError(err.message);\r\n      toast.error(err.message);\r\n      return false;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const deletePricingRule = async (id) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      const response = await fetch(`http://localhost:5000/api/admin/pricing/${id}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Authorization': getAuthHeader()\r\n        }\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const data = await response.json();\r\n        throw new Error(data.message || 'Failed to delete pricing rule');\r\n      }\r\n\r\n      toast.success('Pricing rule deleted successfully');\r\n      await fetchPricingRules();\r\n      return true;\r\n    } catch (err) {\r\n      console.error('Error deleting pricing rule:', err);\r\n      setError(err.message);\r\n      toast.error(err.message);\r\n      return false;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    pricingRules,\r\n    loading,\r\n    error,\r\n    fetchPricingRules,\r\n    addPricingRule,\r\n    updatePricingRule,\r\n    deletePricingRule\r\n  };\r\n};\r\n\r\nexport default usePricing;"],"mappings":";AAAA;AACA,SAASA,QAAQ,EAAEC,WAAW,QAAQ,OAAO;AAC7C,SAASC,OAAO,QAAQ,WAAW;AACnC,OAAOC,KAAK,MAAM,iBAAiB;AAEnC,OAAO,MAAMC,UAAU,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC9B,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGP,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACQ,OAAO,EAAEC,UAAU,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACU,KAAK,EAAEC,QAAQ,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EAExC,MAAMY,aAAa,GAAGA,CAAA,KAAM;IAC1B,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAI,CAACF,KAAK,EAAE,MAAM,IAAIG,KAAK,CAAC,yBAAyB,CAAC;IACtD,OAAOH,KAAK,CAACI,UAAU,CAAC,SAAS,CAAC,GAAGJ,KAAK,GAAG,UAAUA,KAAK,EAAE;EAChE,CAAC;EAED,MAAMK,iBAAiB,GAAGjB,WAAW,CAAC,YAAY;IAChD,IAAI;MACFQ,UAAU,CAAC,IAAI,CAAC;MAChBE,QAAQ,CAAC,IAAI,CAAC;MAEd,MAAMQ,QAAQ,GAAG,MAAMC,KAAK,CAAC,yCAAyC,EAAE;QACtEC,OAAO,EAAE;UACP,eAAe,EAAET,aAAa,CAAC,CAAC;UAChC,cAAc,EAAE;QAClB;MACF,CAAC,CAAC;MAEF,IAAI,CAACO,QAAQ,CAACG,EAAE,EAAE;QAChB,MAAMC,IAAI,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;QAClC,MAAM,IAAIR,KAAK,CAACO,IAAI,CAACE,OAAO,IAAI,+BAA+B,CAAC;MAClE;MAEA,MAAMF,IAAI,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;MAClCjB,eAAe,CAACgB,IAAI,CAAC;IACvB,CAAC,CAAC,OAAOG,GAAG,EAAE;MACZC,OAAO,CAACjB,KAAK,CAAC,+BAA+B,EAAEgB,GAAG,CAAC;MACnDf,QAAQ,CAACe,GAAG,CAACD,OAAO,CAAC;MACrBtB,KAAK,CAACO,KAAK,CAACgB,GAAG,CAACD,OAAO,CAAC;IAC1B,CAAC,SAAS;MACRhB,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMmB,cAAc,GAAG,MAAOC,QAAQ,IAAK;IACzC,IAAI;MACFpB,UAAU,CAAC,IAAI,CAAC;MAChBE,QAAQ,CAAC,IAAI,CAAC;MAEd,MAAMQ,QAAQ,GAAG,MAAMC,KAAK,CAAC,yCAAyC,EAAE;QACtEU,MAAM,EAAE,MAAM;QACdT,OAAO,EAAE;UACP,eAAe,EAAET,aAAa,CAAC,CAAC;UAChC,cAAc,EAAE;QAClB,CAAC;QACDmB,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACJ,QAAQ;MAC/B,CAAC,CAAC;MAEF,IAAI,CAACV,QAAQ,CAACG,EAAE,EAAE;QAChB,MAAMC,IAAI,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;QAClC,MAAM,IAAIR,KAAK,CAACO,IAAI,CAACE,OAAO,IAAI,4BAA4B,CAAC;MAC/D;MAEAtB,KAAK,CAAC+B,OAAO,CAAC,iCAAiC,CAAC;MAChD,MAAMhB,iBAAiB,CAAC,CAAC;MACzB,OAAO,IAAI;IACb,CAAC,CAAC,OAAOQ,GAAG,EAAE;MACZC,OAAO,CAACjB,KAAK,CAAC,4BAA4B,EAAEgB,GAAG,CAAC;MAChDf,QAAQ,CAACe,GAAG,CAACD,OAAO,CAAC;MACrBtB,KAAK,CAACO,KAAK,CAACgB,GAAG,CAACD,OAAO,CAAC;MACxB,OAAO,KAAK;IACd,CAAC,SAAS;MACRhB,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAM0B,iBAAiB,GAAG,MAAAA,CAAOC,EAAE,EAAEP,QAAQ,KAAK;IAChD,IAAI;MACFpB,UAAU,CAAC,IAAI,CAAC;MAChBE,QAAQ,CAAC,IAAI,CAAC;MAEd,MAAMQ,QAAQ,GAAG,MAAMC,KAAK,CAAC,2CAA2CgB,EAAE,EAAE,EAAE;QAC5EN,MAAM,EAAE,KAAK;QACbT,OAAO,EAAE;UACP,eAAe,EAAET,aAAa,CAAC,CAAC;UAChC,cAAc,EAAE;QAClB,CAAC;QACDmB,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACJ,QAAQ;MAC/B,CAAC,CAAC;MAEF,IAAI,CAACV,QAAQ,CAACG,EAAE,EAAE;QAChB,MAAMC,IAAI,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;QAClC,MAAM,IAAIR,KAAK,CAACO,IAAI,CAACE,OAAO,IAAI,+BAA+B,CAAC;MAClE;MAEAtB,KAAK,CAAC+B,OAAO,CAAC,mCAAmC,CAAC;MAClD,MAAMhB,iBAAiB,CAAC,CAAC;MACzB,OAAO,IAAI;IACb,CAAC,CAAC,OAAOQ,GAAG,EAAE;MACZC,OAAO,CAACjB,KAAK,CAAC,8BAA8B,EAAEgB,GAAG,CAAC;MAClDf,QAAQ,CAACe,GAAG,CAACD,OAAO,CAAC;MACrBtB,KAAK,CAACO,KAAK,CAACgB,GAAG,CAACD,OAAO,CAAC;MACxB,OAAO,KAAK;IACd,CAAC,SAAS;MACRhB,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAM4B,iBAAiB,GAAG,MAAOD,EAAE,IAAK;IACtC,IAAI;MACF3B,UAAU,CAAC,IAAI,CAAC;MAChBE,QAAQ,CAAC,IAAI,CAAC;MAEd,MAAMQ,QAAQ,GAAG,MAAMC,KAAK,CAAC,2CAA2CgB,EAAE,EAAE,EAAE;QAC5EN,MAAM,EAAE,QAAQ;QAChBT,OAAO,EAAE;UACP,eAAe,EAAET,aAAa,CAAC;QACjC;MACF,CAAC,CAAC;MAEF,IAAI,CAACO,QAAQ,CAACG,EAAE,EAAE;QAChB,MAAMC,IAAI,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;QAClC,MAAM,IAAIR,KAAK,CAACO,IAAI,CAACE,OAAO,IAAI,+BAA+B,CAAC;MAClE;MAEAtB,KAAK,CAAC+B,OAAO,CAAC,mCAAmC,CAAC;MAClD,MAAMhB,iBAAiB,CAAC,CAAC;MACzB,OAAO,IAAI;IACb,CAAC,CAAC,OAAOQ,GAAG,EAAE;MACZC,OAAO,CAACjB,KAAK,CAAC,8BAA8B,EAAEgB,GAAG,CAAC;MAClDf,QAAQ,CAACe,GAAG,CAACD,OAAO,CAAC;MACrBtB,KAAK,CAACO,KAAK,CAACgB,GAAG,CAACD,OAAO,CAAC;MACxB,OAAO,KAAK;IACd,CAAC,SAAS;MACRhB,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,OAAO;IACLH,YAAY;IACZE,OAAO;IACPE,KAAK;IACLQ,iBAAiB;IACjBU,cAAc;IACdO,iBAAiB;IACjBE;EACF,CAAC;AACH,CAAC;AAAChC,EAAA,CA9IWD,UAAU;AAgJvB,eAAeA,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}